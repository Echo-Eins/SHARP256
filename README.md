# SHARP-256 Protocol

**S**wift **H**ash **A**ssurance **R**ust **P**rotocol

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∞–π–ª–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ BLAKE3.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üöÄ –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ (80-90% –æ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–∞)
- üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é BLAKE3
- üìä –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (SAO)
- üíæ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ—Å–ª–µ —Ä–∞–∑—Ä—ã–≤–∞
- üñ•Ô∏è GUI –∏ headless —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- üîê –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ TLS 1.3
- üìà –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —É—Å–ª–æ–≤–∏—è —Å–µ—Ç–∏
- üåê **NAT traversal** (STUN RFC8489/5780, UPnP/NAT-PMP/PCP, UDP hole punching)
- üîÑ **Relay —Å–µ—Ä–≤–µ—Ä** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –ë–ª–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö: 256 –ö–ë
- –ü–∞—Ä—Ç–∏–∏: 5-50 –ø–∞–∫–µ—Ç–æ–≤ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: BLAKE3
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: UDP —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GSO/GRO –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ –¥–æ 64 –ö–ë
- NAT traversal: STUN –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP, UPnP –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤, UDP hole punching –¥–ª—è P2P

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Rust 1.70+
- Cargo

### –°–±–æ—Ä–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-repo/sharp-256
cd sharp-256

# –°–±–æ—Ä–∫–∞ —Å GUI –∏ NAT traversal (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
cargo build --release

# –°–±–æ—Ä–∫–∞ –±–µ–∑ GUI
cargo build --release --no-default-features --features nat-traversal

# –°–±–æ—Ä–∫–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TLS
cargo build --release --features tls

# –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å–æ –≤—Å–µ–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
cargo build --release --features "gui,tls,nat-traversal"
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å

```bash
# GUI —Ä–µ–∂–∏–º —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º NAT traversal
./target/release/sharp-sender /path/to/file.bin 192.168.1.100:5555

# Headless —Ä–µ–∂–∏–º
./target/release/sharp-sender /path/to/file.bin 192.168.1.100:5555 --headless

# –° —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
./target/release/sharp-sender /path/to/file.bin 192.168.1.100:5555 --encrypt

# –û—Ç–∫–ª—é—á–∏—Ç—å NAT traversal (—Ç–æ–ª—å–∫–æ –ø—Ä—è–º–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)
./target/release/sharp-sender /path/to/file.bin 192.168.1.100:5555 --no-nat

# –£–∫–∞–∑–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
./target/release/sharp-sender /path/to/file.bin 192.168.1.100:5555 --bind 0.0.0.0:5556
```

### –ü–æ–ª—É—á–∞—Ç–µ–ª—å

```bash
# GUI —Ä–µ–∂–∏–º —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º NAT traversal
./target/release/sharp-receiver

# Headless —Ä–µ–∂–∏–º
./target/release/sharp-receiver --headless

# –£–∫–∞–∑–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
./target/release/sharp-receiver --output /path/to/downloads

# –£–∫–∞–∑–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
./target/release/sharp-receiver --bind 0.0.0.0:5555

# –û—Ç–∫–ª—é—á–∏—Ç—å NAT traversal
./target/release/sharp-receiver --no-nat
```

### Relay —Å–µ—Ä–≤–µ—Ä

–î–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –ø—Ä—è–º–æ–µ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ:

```bash
# –ó–∞–ø—É—Å–∫ relay —Å–µ—Ä–≤–µ—Ä–∞
./target/release/sharp-relay --bind 0.0.0.0:5556

# –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å relay —á–µ—Ä–µ–∑ API
```

## NAT Traversal

–ü—Ä–æ—Ç–æ–∫–æ–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—ã—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä—è–º–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É—è:

1. **STUN** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä—ã:
   - stun.l.google.com:19302
   - stun.cloudflare.com:3478

2. **UPnP** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ

3. **UDP Hole Punching** - –ø—Ä–æ–±–∏–≤–∞–Ω–∏–µ NAT –¥–ª—è P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

4. **Relay** - –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

| –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å | –ü–æ–ª—É—á–∞—Ç–µ–ª—å | –ú–µ—Ç–æ–¥ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è |
|-------------|------------|------------------|
| –ü—É–±–ª–∏—á–Ω—ã–π IP | –ü—É–±–ª–∏—á–Ω—ã–π IP | –ü—Ä—è–º–æ–µ |
| –ó–∞ NAT | –ü—É–±–ª–∏—á–Ω—ã–π IP | –ü—Ä—è–º–æ–µ |
| –ü—É–±–ª–∏—á–Ω—ã–π IP | –ó–∞ NAT | UPnP –∏–ª–∏ Relay |
| –ó–∞ NAT | –ó–∞ NAT | Hole Punching –∏–ª–∏ Relay |
| –ó–∞ Symmetric NAT | –ó–∞ NAT | Relay |

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

### sharp-sender

- `file` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- `receiver` - IP:–ø–æ—Ä—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- `--bind` - –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.0.0.0:0)
- `--encrypt` - –í–∫–ª—é—á–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ TLS 1.3
- `--no-nat` - –û—Ç–∫–ª—é—á–∏—Ç—å NAT traversal
- `--log-level` - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (trace/debug/info/warn/error)
- `--headless` - –ó–∞–ø—É—Å–∫ –±–µ–∑ GUI

### sharp-receiver

- `--output` - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ./received)
- `--bind` - –ê–¥—Ä–µ—Å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.0.0.0:5555)
- `--no-nat` - –û—Ç–∫–ª—é—á–∏—Ç—å NAT traversal
- `--log-level` - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `--headless` - –ó–∞–ø—É—Å–∫ –±–µ–∑ GUI

### sharp-relay

- `--bind` - –ê–¥—Ä–µ—Å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.0.0.0:5556)
- `--log-level` - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```rust
use sharp_256::{Sender, Receiver};
use std::net::SocketAddr;
use std::path::Path;

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞
async fn send_file() -> Result<()> {
    let sender = Sender::new(
        "0.0.0.0:0".parse()?,
        "192.168.1.100:5555".parse()?,
        Path::new("/path/to/file.bin"),
        false, // –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
    ).await?;
    
    sender.start_transfer().await?;
    Ok(())
}

// –ü—Ä–∏–µ–º —Ñ–∞–π–ª–æ–≤
async fn receive_files() -> Result<()> {
    let receiver = Receiver::new(
        "0.0.0.0:5555".parse()?,
        PathBuf::from("./downloads"),
    ).await?;
    
    receiver.start().await?;
    Ok(())
}
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ù–∞ –∫–∞–Ω–∞–ª–µ 1 –ì–±–∏—Ç/—Å:
- –ë–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è: ~850-900 –ú–±–∏—Ç/—Å
- –° TLS 1.3: ~700-800 –ú–±–∏—Ç/—Å

## –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (SAO)

SAO –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–∞—Ä—Ç–∏–∏ (5-50 –ø–∞–∫–µ—Ç–æ–≤) –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- RTT (Round Trip Time)
- –ü—Ä–æ—Ü–µ–Ω—Ç–∞ –ø–æ—Ç–µ—Ä—å –ø–∞–∫–µ—Ç–æ–≤
- –ü—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–∞

–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞:
```
score = (1 - loss_rate) * bandwidth_utilization * (1 / (1 + rtt/100))
```

## –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏

–ü—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ–∞–π–ª —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤:
- Windows: `%APPDATA%\sharp-256\states\`
- Linux: `~/.local/share/sharp-256/states/`
- macOS: `~/Library/Application Support/sharp-256/states/`

–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –ø–µ—Ä–µ–¥–∞—á–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –º–µ—Å—Ç–∞ —Ä–∞–∑—Ä—ã–≤–∞.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ê–≤—Ç–æ—Ä

Echo_1